name: Docker Image CI

on:
    push:
        branches: ["release-*"]

jobs:
    build:
        runs-on: ubuntu-latest

        steps:
            - uses: actions/checkout@v3
            - name: Login to Docker Hub
            run: docker login -u ${{ secrets.DOCKER_USER }}
                -p ${{ secrets.DOCKER_PASS }}
            - name: Build Docker image
            run:docker build -t grabtrack-www:latest -t grabtrack-www:${GITHUB_SHA::8} ./app
            - name: Publish Docker image
            run: docker push grabtrack-www
